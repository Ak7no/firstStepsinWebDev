{% extends "base.html" %}
{% block title %}Buchung überprüfen{% endblock %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/style_booking_review.css') }}">
<div class="video-bg-container">
    <video autoplay muted loop playsinline>
        <source src="{{ url_for('static', filename='primVid.mp4') }}" type="video/mp4">
    </video>
    <div class="video-bg-overlay"></div>
</div>
<div class="content-wrapper">
    <div class="container mt-4">

        <div class="main-container-box">
            <h1>Buchung für {{ hotel.name }}</h1>
            <div class="progress-wrapper">
                <span class="progress-text">Schritt 3 von 3</span>
                <div class="progress flex-grow-1">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 100%"></div>
                </div>
            </div>
            <form method="POST" action="{{ url_for('views.booking_review', hotel_id=hotel.id) }}">
                <div class="row">
                    <div class="col-md-8">
                        <div class="card mb-4">
                            <div class="card-header">
                                <h4>Buchungsübersicht</h4>
                            </div>
                            <div class="card-body">
                                <p><strong>Hotel:</strong> {{ hotel.name }}</p>
                                <p><strong>Adresse:</strong> {{ hotel.hotel_street}}</p>
                                <p><strong>Check-in:</strong> {{ booking_data.checkin }}</p>
                                <p><strong>Check-out:</strong> {{ booking_data.checkout }}</p>
                                <p><strong>Gäste:</strong>
                                    {%if booking_data.num_adults| int ==1 %}
                                    {{ booking_data.num_adults }} Erwachsener
                                    {% elif booking_data.num_adults| int >1 %}
                                    {{ booking_data.num_adults }} Erwachsene
                                    {% endif %}
                                    {% if booking_data.num_children| int <=1 %} und {{booking_data.num_children}} Kind
                                        {% elif booking_data.num_children| int>1 %}
                                        und {{booking_data.num_children}} Kinder
                                        {% endif %}</p>
                                <p><strong>Zimmertyp:</strong> {{ booking_data.room_type }}</p>
                                {% if booking_data.special_requests %}
                                <p><strong>Besondere Wünsche:</strong> {{ booking_data.special_requests }}</p>
                                {% endif %}
                                {% if session.get('booking_data') %}
                                <p><strong>Gesamtpreis:</strong>
                                    <span class="text" style="font-size: 1em;">
                                        {{ "%.2f"|format(session['booking_data'].get('total_price', 0)) }}€
                                    </span>
                                </p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h4>Zahlungsinformationen</h4>
                            </div>
                            <div class="card-input-group">
                                <input type="text" name="cardholder" class="form-input" placeholder="Karteninhaber"
                                    required>
                                <input type="text" name="card_number" class="form-input"
                                    placeholder="Kartennummer (z.B. 4242 4242 4242 4242)" maxlength="19" required>
                                <div class="form-row">
                                    <input type="text" name="expiry" class="form-input" placeholder="MM/YY"
                                        maxlength="5" required>

                                    <input type="text" name="cvv" class="form-input" placeholder="CVV (123)"
                                        maxlength="4" required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <h6 class="mb-0">Wichtiger Hinweis zur Buchung</h6>
                            </div>
                            <div class="card-body">
                                <p><strong>⚠️ Hinweis:</strong> Bitte überprüfen Sie ihre Buchungsdaten sorgfältig um
                                    Fehlbuchungen zu vermeiden. Mit dem Klick auf "Jetzt verbindlich Buchen" bestätigen
                                    Sie, dass ihre Buchungsdaten korrekt sind.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="btn-group">
                    <a href="{{ url_for('views.booking_step1', hotel_id=hotel.id) }}" class="btn btn-secondary">« Zurück
                        bearbeiten</a>
                    <button type="submit" class="btn btn-success">Jetzt verbindlich buchen</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}