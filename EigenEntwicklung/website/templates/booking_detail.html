{% extends "base.html" %}
{% block title %}{{ hotel.name }}{% endblock %}
{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/style_booking_detail.css') }}">

<!--Video Hintergrund-->
<div class="video-bg-container">
  <video autoplay muted loop playsinline>
    <source src="{{ url_for('static', filename='primVid.mp4') }}" type="video/mp4">
  </video>
  <div class="video-bg-overlay"></div>
</div>
<div class="content-wrapper">
  <div class="container">

   <!--Main Part-->>
    <div class="main-container-box">
      <h1>{{ hotel.name }}</h1>

      <div class="row">
        <!-- LINKE SEITE: Info-Boxen -->
        <div class="col-md-6">
          <!-- Schnellübersicht -->
          <div class="card mb-3">
            <div class="card-header">
              <h6 class="mb-0">Schnellübersicht</h6>
            </div>
            <div class="card-body">
              <p class="mb-2"><strong>Hotel:</strong> {{ hotel.name }}</p>
              <p class="mb-2"><strong>Stadt:</strong> {{ hotel.city }}</p>
              <p class="mb-0"><strong>Ab:</strong> €{{ hotel.price_per_night }}/Nacht</p>
            </div>
          </div>

          <!-- Hotel-Informationen -->
          <div class="card mb-3">
            <div class="card-header">
              <h6 class="mb-0"><strong>Hotel-Informationen</strong></h6>
            </div>
            <div class="card-body">
              <p class="mb-2"><strong>Ort:</strong> {{ hotel.city }}</p>
              <p class="mb-2"><strong>Adresse:</strong> {{ hotel.hotel_street }}</p>
              <p class="mb-2"><strong>Sterne rating:</strong>⭐⭐⭐⭐⭐</p>
              <p class="mb-2"><strong>Preis pro Nacht:</strong> €{{ hotel.price_per_night }}</p>

              <div class="descriptionbox">
                <details name="hotel-info" class="info-details">
                  <summary>
                    Mehr Informationen für das Hotel anzeigen lassen!
                  </summary>
                  <div class="info-content">
                    {{ hotel.description_long }}
                  </div>
                </details>
                <details name="hotel-info" class="info-details">
                  <summary>
                    Annehmlichkeiten & Services anzeigen lassen!
                  </summary>
                  <div class="info-content">
                    {{ hotel.service_details }}
                  </div>
                </details>
              </div>
            </div>
          </div>
          <!-- LEAFLET MAPS - VOLLE BREITE -->
          <div class="row mt-4">
            <div class="col-12">
              <div id="map"
                style="width: 100%; height: 450px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); margin-bottom: 2rem;">
              </div>
            </div>
          </div>
          <!-- Buchungs-Button -->
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Interessiert an diesem Hotel?</h5>
              <p>Starten Sie jetzt Ihre Buchung in nur wenigen Schritten!</p>

              <a href="{{ url_for('views.booking_step1', hotel_id=hotel.id) }}" class="btn btn-success btn-lg">
                <i class="fas fa-calendar-check"></i> Jetzt buchen
              </a>
            </div>
          </div>
        </div>

        <!-- RECHTE SEITE: Carousel -->
        <div class="col-md-6">
          <div class="hotel-carousel">
            <div class="carousel-inner">
              <img src="{{ url_for('static', filename='hotel1.jpg') }}" alt="Hotel Außenansicht"
                class="carousel-image active">
              <img src="{{ url_for('static', filename='hotel2.jpg') }}" alt="Hotelzimmer" class="carousel-image">
              <img src="{{ url_for('static', filename='hotel3.jpg') }}" alt="Restaurant" class="carousel-image">
            </div>

            <!-- Pfeil Links -->
            <button class="carousel-control-prev" onclick="changeSlide(-1)">
              <span>&#10094;</span>
            </button>

            <!-- Pfeil Rechts -->
            <button class="carousel-control-next" onclick="changeSlide(1)">
              <span>&#10095;</span>
            </button>
          </div>

          <!-- ===== NEUE TEXT-BOX UNTER CAROUSEL ===== -->
          <div class="card mt-3">
            <div class="card-header">
              <h6 class="mb-0">Gästebewertungen</h6>
            </div>
            <div class="card-body">
              <p>
              <div class="progress-wrapper">
                <span class="progress-text">Hotelpersonal - 9.5/10</span>
                <div class="progress flex-grow-1">
                  <div class="progress-bar bg-success" role="progressbar" style="width: 95%"></div>
                </div>
              </div>
              </p>

              <p>
              <div class="progress-wrapper">
                <span class="progress-text">Ausstattung - 9.4/10</span>
                <div class="progress flex-grow-1">
                  <div class="progress-bar bg-success" role="progressbar" style="width: 94%"></div>
                </div>
              </div>
              </p>

              <p>
              <div class="progress-wrapper">
                <span class="progress-text">Preis-Leistungs-Verhältnis - 8.2/10</span>
                <div class="progress flex-grow-1">
                  <div class="progress-bar bg-success" role="progressbar" style="width: 82%"></div>
                </div>
              </div>
              </p>
              <p>
              <div class="progress-wrapper">
                <span class="progress-text">Kostenfreies WLAN - 8.3/10</span>
                <div class="progress flex-grow-1">
                  <div class="progress-bar bg-success" role="progressbar" style="width: 53%"></div>
                </div>
              </div>
              </p>
            </div>
          </div>
          <div class="card mt-3">
            <div class="card-header">
              <h6 class="mb-0">Sie haben Fragen?</h6>
            </div>
            <div class="card-body">
              <p> Bei bestehenden Fragen zu unseren Angebotenen Services, zögen Sie nicht und kontaktieren Sie unser
                Support-Team für weitere Informationen oder spezielle Anfragen.</p>
              <p>✉️: {{hotel.hotel_email}}</p>
              <p>☎️: {{hotel.hotel_phone}}</p>
              <p>Falls Sie nach weiteren Allgemeinen Informationen suchen oder nach bestimmten Events, klicken Sie bitte
                hier:
              </p>
              <a href={{hotel.hotel_website}} class="btn-hotel-website">
                {{hotel.name}} Webseite
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- LEAFLET CSS & JS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>


    <script>
      // Carousel Script
      let currentSlide = 0;
      const slides = document.querySelectorAll('.carousel-image');
      const totalSlides = slides.length;

      function showSlide(index) {
        slides.forEach(slide => slide.classList.remove('active'));
        slides[index].classList.add('active');
      }

      function changeSlide(direction) {
        currentSlide += direction;

        if (currentSlide >= totalSlides) {
          currentSlide = 0;
        } else if (currentSlide < 0) {
          currentSlide = totalSlides - 1;
        }

        showSlide(currentSlide);
      }

      // Auto-Slide alle 4 Sekunden
      setInterval(() => {
        changeSlide(1);
      }, 4000);

      //Open Street Map Script  
      function initMap() {
      const HOTEL_LATITUDE = {{ hotel.latitude }};
      const HOTEL_LONGTITUDE = {{ hotel.longtitude }};
      const hotelLocation = [HOTEL_LATITUDE, HOTEL_LONGTITUDE];
      const map = L.map('map').setView(hotelLocation, 15);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors',
        maxZoom: 19
      }).addTo(map);

      L.marker(hotelLocation)
        .addTo(map)
        .bindPopup("<b>{{ hotel.name }}</b><br>{{ hotel.hotel_street }}")
        .openPopup();
    }

      window.addEventListener('load', initMap);
    </script>

    {% endblock %}